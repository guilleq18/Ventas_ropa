{% extends "auth/password_reset_base.html" %}
{% block title %}Cambiar clave{% endblock %}
{% block subtitle %}Actualizá tu contraseña de acceso{% endblock %}

{% block content %}
  <div class="soft-panel" style="margin-bottom:14px;">
    <div style="font-weight:700; margin-bottom:4px;">Cambio de contraseña</div>
    <div class="small-note">
      Ingresá tu contraseña actual y luego definí una nueva.
    </div>
  </div>

  {% if form.non_field_errors or form.errors %}
    <div class="card-panel red lighten-5 red-text text-darken-4" style="padding:12px; border-radius:10px;">
      No se pudo actualizar la contraseña. Revisá los datos e intentá nuevamente.
    </div>
  {% endif %}

  <form method="post" novalidate>
    {% csrf_token %}

    <div class="input-field">
      {{ form.old_password }}
      <label for="{{ form.old_password.id_for_label }}" class="active">Contraseña actual</label>
      {% for err in form.old_password.errors %}
        <div class="red-text text-darken-3" style="font-size:12px;">{{ err }}</div>
      {% endfor %}
    </div>

    <div class="input-field">
      {{ form.new_password1 }}
      <label for="{{ form.new_password1.id_for_label }}" class="active">Nueva contraseña</label>
      {% for err in form.new_password1.errors %}
        <div class="red-text text-darken-3" style="font-size:12px;">{{ err }}</div>
      {% endfor %}
    </div>

    <div class="input-field">
      {{ form.new_password2 }}
      <label for="{{ form.new_password2.id_for_label }}" class="active">Repetir nueva contraseña</label>
      {% for err in form.new_password2.errors %}
        <div class="red-text text-darken-3" style="font-size:12px;">{{ err }}</div>
      {% endfor %}
    </div>

    <button class="btn waves-effect waves-light btn-full" type="submit"
            style="background:linear-gradient(180deg, #7b4f43 0%, #6f463b 100%);">
      Guardar nueva contraseña
    </button>

    <div class="helper-links">
      {% if request.user.is_authenticated %}
        {% if request.user.is_superuser or perms.admin_panel.view_usuarioperfil %}
          <a href="{% url 'admin_panel:dashboard' %}" class="btn-flat waves-effect">Volver</a>
        {% else %}
          <a href="{% url 'core:dashboard' %}" class="btn-flat waves-effect">Volver</a>
        {% endif %}
      {% endif %}
    </div>
  </form>
{% endblock %}
