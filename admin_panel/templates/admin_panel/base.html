<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}Admin{% endblock %}</title>

  <!-- Materialize -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/materialize-css@1.0.0/dist/css/materialize.min.css">
  <script defer src="https://cdn.jsdelivr.net/npm/materialize-css@1.0.0/dist/js/materialize.min.js"></script>

  <style>
    body{ background:#f3f4f6; }
    main{ padding:16px; }

    /* Sidebar desktop */
    .sidenav.sidenav-fixed{
      width: 260px;
    }
    header, main, footer{
      padding-left: 260px;
    }
    @media only screen and (max-width : 992px) {
      header, main, footer{
        padding-left: 0;
      }
    }

    .brand{
      padding:16px 20px;
      font-weight:700;
      font-size:1.1rem;
    }
    .menu-section{
      padding: 8px 20px;
      font-size: .85rem;
      color:#777;
      text-transform: uppercase;
      letter-spacing: .04em;
    }
    /* === Modal centrado (compensa sidenav fijo en desktop) === */
    .modal {
      left: 50% !important;
      transform: translateX(-50%) !important;
      right: auto !important;
      margin: 0 !important;
    }

    /* En pantallas grandes, mantenemos un ancho cómodo */
    @media only screen and (min-width: 993px) {
      .modal {
        width: 60% !important;
        max-width: 720px;
      }
    }

    /* En mobile que use casi toda la pantalla */
    @media only screen and (max-width: 992px) {
      .modal {
        width: 92% !important;
      }
    }

  </style>
</head>

<body>
  <!-- Topbar -->
  <header>
    <nav class="white">
      <div class="nav-wrapper" style="padding:0 12px;">
        <a href="#" data-target="admin-sidenav" class="sidenav-trigger grey-text text-darken-3">
          <i class="material-icons">menu</i>
        </a>

        <span class="grey-text text-darken-3" style="font-weight:600;">
          {% block header_title %}Panel de administración{% endblock %}
        </span>

        <ul class="right">
          <li class="grey-text text-darken-2" style="padding-right:10px;">
            {{ request.user.get_username }}
          </li>
          <li>
            <a class="grey-text text-darken-3" href="{% url 'logout' %}">
              Salir
            </a>
          </li>
        </ul>
      </div>
    </nav>
  </header>

  <!-- Sidebar -->
  <ul id="admin-sidenav" class="sidenav sidenav-fixed">
    <li class="brand">Sistema de Ventas</li>

    <li class="menu-section">Principal</li>
    <li>
      <a href="{% url 'admin_panel:dashboard' %}">
        <i class="material-icons">dashboard</i>Dashboard
      </a>
    </li>

    <div class="menu-section">Gestión</div>

    {# Catálogo (wrapper o link directo) #}
    <li>
      <a href="{% url 'admin_panel:catalogo_home' %}">
        <i class="material-icons">inventory_2</i>Catálogo
      </a>
    </li>

    <li>
      <a href="{% url 'admin_panel:ventas_lista' %}">
        <i class="material-icons">receipt_long</i>Ventas
      </a>
    </li>

    <li>
      <a href="{% url 'admin_panel:usuarios_lista' %}">
        <i class="material-icons">people</i>Usuarios
      </a>
    </li>
    <li>
      <a href="{% url 'admin_panel:settings' %}">
        <i class="material-icons">settings</i>Configuración
  </a>
</li>
<li>
  <a href="{% url 'admin_panel:balances' %}">
    <i class="material-icons">insights</i>Balances
  </a>
</li>
<li>
  <a href="{% url 'admin_panel:cc_lista' %}">
    <i class="material-icons">account_balance_wallet</i>Cuentas corrientes
  </a>
</li>
  </ul>
  

  <main>
    {% if messages %}
  {% for message in messages %}
    {% if message.tags == "success" %}
      <div class="card-panel green lighten-4 green-text text-darken-4">{{ message }}</div>
    {% elif message.tags == "error" %}
      <div class="card-panel red lighten-4 red-text text-darken-4">{{ message }}</div>
    {% elif message.tags == "warning" %}
      <div class="card-panel yellow lighten-4 brown-text text-darken-4">{{ message }}</div>
    {% else %}
      <div class="card-panel blue lighten-4 blue-text text-darken-4">{{ message }}</div>
    {% endif %}
  {% endfor %}
{% endif %}

    {% block content %}{% endblock %}
  </main>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const sidenavs = document.querySelectorAll('.sidenav');
      M.Sidenav.init(sidenavs, {});
    });
    
    document.addEventListener('DOMContentLoaded', function() {
      M.Sidenav.init(document.querySelectorAll('.sidenav'), {});
      M.Modal.init(document.querySelectorAll('.modal'), {});
      M.FormSelect.init(document.querySelectorAll('select'), {});
    });


  </script>

  <!-- Material Icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</body>
</html>
